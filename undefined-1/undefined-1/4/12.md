# 12장 컴포넌트

## 컴포넌트 정의

> 컴포넌트는 배포 단위다. 컴포넌트는 시스템의 구성 요소로 배포할 수 있는 가장 작은 단위다. 자바의 경우 jar 파일이 컴포넌트다.

여기서 jar 라고 해서 내게 익숙한 api 서버만 생각하면 안된다. 책을 보다보면 이 컴포넌트라는게 라이브러리가 될 수도 있다. gradle 에서 의존성을 설정하고 이를 내려받아 사용하는 것을 생각해보면 쉽다. 이 라이브러리 역시 버전을 관리하면서 누군가가 배포하는 것이고 이 '컴포넌트'를 받아 사용하는 것이므로 위 정의를 만족한다는 것을 알 수 있다.



## 컴포넌트의 역사

이번 파트에서는 사실 컴포넌트의 역사가 주된 내용인데 막 정리해둘 만큼의 내용은 아니다. 그런데 내용 자체는 재미있다. 엄청 오래전에는 라이브러리를 쓰려면 라이브러리 함수의 소스 코드를 애플리케이션 코드에 직접 포함시켜서 단일 프로그램으로 컴파일 했었고, 이 불편함이 개선되면서 애플리케이션이 외부를 호출하는 '외부 참조'를 통해서 라이브러리를 호출시키는 것으로 바뀐 것이다.



## 지금 내가 사용하는 의존성은 어떤 원리로 사용 되는 걸까

### 클래스패스(Classpath)란

> JVM이 클래스나 패키지를 찾을 때 기준이 되는 경로

클래스패스에 없는 경로는 JVM 이 접근을 못한다. 그래서 순서상 아래와 같다고 볼 수 있다.

> 컴파일 -> 클래스패스 추가 -> 클래스로딩 직전에 클래스패스 목록 참조 -> 해당 클래스패스로 접근



### gradle 에 설정한 의존성들은 어떻게 참조되는 걸까

1. Gradle 설정(의존성 설정)
2. 다운 받으면 로컬 저장소에 의존성이 저장된다.(ex: /Users/jungkwonkim/.m2/repository)
3. 이 로컬 저장소에 있는 의존성들을 어플리케이션에서 참조하여 사용한다.
4. build 시 최종적으로 만든 Spring Boot 어플리케이션과 여기서 참조한 의존성 jar들 까지 같이 패키징되어 통합 jar 내에 들어간다.
5. Jar 실행시 Spring Boot 어플리케이션과 여기서 참조한 의존성 jar들을 클래스패스에 모두 추가한다. 비로소 JVM 의 접근이 가능해진다.



## (+) jar

> JAR(JAVA Archive)는 Java 언어로 개발된 애플리케이션 및 라이브러리의 배포 및 실행을 위한 파일 형식입니다. JAR 파일은 여러 Java 클래스 파일 및 관련 리소스를 하나의 압축된 아카이브로 묶어서 저장하는 방식으로 사용됩니다. 아래는 JAR 파일에 대한 주요 특징과 사용 사례에 대한 설명입니다:
>
>
>
> 1. **압축된 파일 포맷:** JAR 파일은 ZIP 형식으로 압축되어 있으며, Java 언어로 개발된 클래스 파일, 리소스 파일, 메타데이터 파일 등을 담고 있습니다.
> 2. **포함된 클래스 파일:** JAR 파일은 하나 이상의 Java 클래스 파일을 포함합니다. 이러한 클래스 파일들은 Java 가상 머신(JVM)에서 실행되며, JAR 파일 내의 클래스들은 다른 Java 애플리케이션에서 재사용할 수 있습니다.
> 3. **리소스 및 설정 파일:** JAR 파일은 클래스 파일 이외에도 이미지, XML 파일, 프로퍼티 파일과 같은 리소스 및 설정 파일을 포함할 수 있습니다.
> 4. **메타데이터 및 매니페스트:** JAR 파일은 매니페스트 파일을 포함하여 애플리케이션에 대한 메타데이터를 저장할 수 있습니다. 메타데이터에는 애플리케이션 버전, 주요 클래스, 의존성 정보 등이 포함될 수 있습니다.
> 5. **배포와 실행:** JAR 파일은 Java 애플리케이션의 배포에 사용됩니다. Java 애플리케이션을 실행하려면 해당 JAR 파일을 Java 실행 명령어로 실행하면 됩니다. Spring Boot와 같은 프레임워크는 애플리케이션을 실행 가능한 JAR 파일로 패키징하여 배포합니다.
> 6. **모듈성 및 의존성 관리:** JAR 파일은 모듈화된 구조를 가지고 있으며, 다른 JAR 파일에서 필요한 클래스와 리소스를 가져다 사용할 수 있습니다. 이것은 Java 프로젝트에서 의존성 관리와 모듈성을 구현하는 데 중요한 역할을 합니다.
> 7. **플랫폼 독립성:** JAR 파일은 Java 가상 머신에서 실행되므로 플랫폼 독립성을 가집니다. 따라서 한 번 작성한 애플리케이션은 서로 다른 운영 체제에서 실행할 수 있습니다.
>
> Java의 생태계와 개발 방법에서 JAR 파일은 핵심적인 역할을 하며, Java 애플리케이션 및 라이브러리의 배포와 공유를 가능하게 합니다.
