# 11장 DIP: 의존성 역전 원칙

## DIP 정의

DIP 는 여러 도서나 강의에서도 여러번 정리를 했고, 책에서도 같은 개념을 설명하고 있어서 정리할 내용이 많지 않다.

> 의존성 역전 원칙에서 말하는 '유연성이 극대화된 시스템'이란 소스 코드 의존성이 추상에 의존하며 구체에는 의존하지 않는 시스템이다.

이게 DIP 정의는 아닌데 이 말대로 하는 것이 곧 DIP 를 적용하게 되는 것이다.



## 그렇다고 모든 의존 대상을 구체적인 대상을 제거하고 추상에만 한정해야 하는가(의존 대상을 바라볼때 어떤 기준으로 바라봐야 하는가)

어쩔 수 없이 구체적인 대상에도 의존할 수 밖에 없다. 책에서 예시를 들고 있는 것도 우리가 String 이라는 구체 클래스에 의존할 수 밖에 없음을 예시로 들고 있다.

그래서 기준을 세워야 한다. 최대한 추상에 의존해야하지만 구체적인 것에도 의존할 수 밖에 없음을 우리는 인지해야하고, 그렇다면 이 상황에서 어떤 기준으로 의존 대상을 인식해야 할 것인가를 명확하게 판단해야 한다.

책에서는 이 이슈에 대해서 아래와 같이 판단하고 있다.

> 우리가 의존하지 않도록 피하고자 하는 것은 바로 변동성이 큰(volatile) 구체적인 요소다.

**의도적으로 인지를 하는게 좋을 것 같다. 구현을 하다가 '의존' 해야하는 일이 발생하는 순간 내가 의존하도록 설계하는 의존 대상이 변동성이 큰 것인지에 대해서 다시 한번 생각해보고 만약 변동성이 큰 것이라면 과하다 싶어도 의도적으로 인터페이스로 분리를 해서 추상에 의존하도록 구현하자.**



## 안정된 추상화

> 안정된 소프트웨어 아키텍처란 변동성이 큰 구현체에 의존하는 일은 지양하고, 안정된 추상 인터페이스를 선호하는 아키텍처라는 뜻이다.



## 아키텍처의 경계

<figure><img src="../../../.gitbook/assets/2023. 4. 5. - 0 10 (1).jpg" alt=""><figcaption></figcaption></figure>

책에서 위 그림은 '팩토리' 패턴을 설명하면서 사용된 것이긴 한데 나는 '아키텍처의 경계'에 관한 개념을 위 그림과 엮는게 더 좋을 것 같다는 생각이 든다.

헥사고날 아키텍처에서도 결국 의존성 역전을 통해서 헥사고날 경계를 포함한 안쪽 영역을 보호하는데 그 경계가 바로 위와 같이 의존성 역전으로 생기는 경계이기 때문이다.

> 그리고 DIP 는 아키텍처 다이어그램에서 가장 눈에 드러나는 원칙이 될 것이다. 그림 11.1의 곡선은 이후의 장에서는 아키텍처 경계가 될 것이다.
