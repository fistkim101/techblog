# 6장 함수형 프로그래밍

## 불변성과 아키텍처

> 아키텍트라면 동시성 문제에 지대한 관심을 가져야만 한다. 우리는 스레드와 프로세스가 여러 개인 상황에서도 설계한 시스템이 여전히 강건하기를 바란다.

책에서는 여러 스레드가 동시에 가변 변수로 접근하게 되면서 경합 및 교착이 발생하는 문제가 생김을 강조하고 있다. 그래서 제대로된 아키텍처는 이러한 동시성 문제까지 고려된 아키텍처여야 함을 말하고 있다.

이러한 맥락에서 아키텍처가 달성해야 하는 것은 '불변성' 이라고 말하고 있다.



## 가변성의 분리

결론적으로 좋은 아키텍처는 위에서 정리한 바와 같이 동시성까지 고려가 된 아키텍처인데 이를 위해서 좋은 설계 방향은 최대한 변수를 변경하는 컴포넌트와 변경하지 않는 컴포넌트를 분리 해야 한다는 것이다.

그렇게 분리를 해야 가변 변수들을 보호하는 적절한 수단을 집중적으로 관심을 두고 처리할 수 있다는 주장이다.

> 현명한 아키텍트라면 가능한 한 많은 처리를 불변 컴포넌트로 옮겨야 하고, 가변 컴포넌트에서는 가능한 한 많은 코드를 빼내야 한다.

이걸 조금 쉬운 말로 바꿔보면 멱등성을 제공해주는 컴포넌트들로 최대한 로직을 구성하고 가변 컴포넌트를 여기저기 흩뿌려 놓지 말라는 의미로 볼 수 있을 것 같다.



## 결론

4장, 5장, 6장 에서 살펴본 각 패러다임들은 3장에서 살펴본 바와 같이 결국 '이거 하지마라' 라는 규율로도 해석할 수 있는 것들이다. 요약하면 아래와 같다.

> * 구조적 프로그래밍은 제어흐름의 직접적인 전환에 부과되는 규율이다.
> * 객체 지향 프로그래밍은 제어흐름의 간접적인 전환에 부과되는 규율이다.
> * 함수형 프로그래밍은 변수 할당에 부과되는 규율이다.

이러한 패러다임들에 입각하면 결국 각 패러다임이 하지말라고 한 것들을 안하게 되는 것이다. 이게 아키텍처랑 무슨 상관이냐면 각 패러다임은 결국 각각의 문제들을 미연에 방지하고자 하는 규율들이고 이를 지킬 수록 좋은 설계가 나오기 때문이다.

그래서 각 패러다임이 각각 무엇을 의미하며 이것들을 아키텍처에 어떻게 녹일지 고민하는 것이 좋은 설계에 이르는 방법이라고 생각된다.
