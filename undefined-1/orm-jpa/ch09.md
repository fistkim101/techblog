# CH09 값 타입

값 타입이 뭔가 싶지만 초반에 엔티티 매핑에서 테이블 단위의 매핑을 했다면 이번에는 컬럼 단위의 매핑에 관한 내용이었다. 어떻게 매핑한다는 내용보다는 Object 관점에서 일반적으로 사용하는 컬럼의 타입 말고 조금 더 세밀한 객체 모델링을 할 수 있는 방법에 대해서 다뤘다.

실무에서 많이 사용해온 부분이라서 엄청 자세하게 정리할 필요까지는 없을 것 같지만 기본적인 내용들은 정리를 하려고 한다.

## @Embedded, @Embeddable&#x20;

```java
public class Member {

	@Id @GeneratedValue
    	@Column(name = "MEMBER_ID")
    	private Long id;

    	@Column(name = "USERNAME")
    	private String username;
        
        //period
    	@Embedded
    	private Period period;

    	//address
    	@Embedded
    	private Address homeAddress;
        
 }
```

```java
@Embeddable
public class Address {

    private String city;
    private String street;
    private String zipcode;

    public Address() { // 기본생성자 필수 
    }
    
}

@Embeddable
public class Period {

    private LocalDateTime startDate;
    private LocalDateTime endDate;

    public Period() { // 기본생성자 필수 
    }
    
}
```

당연한 이야기지만 @Embeddable 도 엔티티와 관계를 맺을 수 있다. 결국 @Embeddable 의 필드들이 @Embedded 가 선언된 곳에 귀속 되므로 @Embeddable 에 @OneToMany 등 엔티티와 관계 설정을 하는 행위 자체가 애초에 @Embedded 에 관계 설정을 한 것과 동일하다.

@AttributeOverride 로 속성을 아래와 같이 재정의도 할 수 있다.

```java
@NoArgsConstructor(access = AccessLevel.PROTECTED)
@Entity
@Setter
@Getter
public class Member{

    @Id @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;


    private String name;

    @Embedded
    @AttributeOverrides({
            @AttributeOverride(name = "city", column = @Column(name = "HOME_CITY")),
            @AttributeOverride(name = "street", column = @Column(name = "HOME_STREET")),
            @AttributeOverride(name = "zipcode.zip", column = @Column(name = "HOME_ZIP")),
            @AttributeOverride(name = "zipcode.plusFour", column = @Column(name = "HOME_PLUS_FOUR")),
    })
    private Address homeAddress;


    @Embedded
    @AttributeOverrides({
            @AttributeOverride(name = "city", column = @Column(name = "COMPANY_CITY")),
            @AttributeOverride(name = "street", column = @Column(name = "COMPANY_STREET")),
            @AttributeOverride(name = "zipcode.zip", column = @Column(name = "COMPANY_ZIP")),
            @AttributeOverride(name = "zipcode.plusFour", column = @Column(name = "COMPANY_PLUS_FOUR")),
    })
    private Address companyAddress;


}
@Embeddable
public class Address {

    private String city;
    private String street;

    @Embedded
    private Zipcode zipcode;
}
@Embeddable
public class Zipcode {

    private String zip;
    private String plusFour;
}
```



















