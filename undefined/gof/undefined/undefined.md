# 싱글톤

## 대분류

객체생성



## 문제상황

### 1. 다수의 객체가 하나의 객체를 공유해야 하는 상황(공유하면 좋은 것이 아니고 반드시 하나의 유일한 객체를 두고 공유를 해야만 하는 상황)

첫번째 예로 캐시를 사용하는 상황이 있다. 예를 들어 캐시 저장소를 담당하는 특정 객체 '캐시 매니저'가 있다고 했을때 이 객체를 사용하는 객체 A, B, C가 있다고 치자. A, B, C 가 각자의 책임을 수행하는 과정에서 캐시된 데이터를 사용해야 할때 동일한 캐시 매니저를 사용해야만 클라이언트에게 데이터 일관성을 보장할 수 있다.

이러한 상황에서 데이터 일관성을 위해 반드시 A, B, C는 캐시 매니저로 동일하고 유일한 객체 하나를 사용해야 한다. 실제로 스프링의 캐시 매니저는 '대부분' 싱글톤 패턴으로 구현되었다고 한다.(이를코드 레벨로 다 확인하진 못했다)

두번째 예시로 설정을 공유하는 상황을 들 수 있다. 일반적으로 설정이라함은 전역적으로 동일한 값을 적용시켜야 하는 것이기 때문에 유일하게 하나만 존재하면서 여러 객체에 참조되어야 한다.



### 2. 다수의 객체가 하나의 객체를 공유하는 것이 자원 사용 효율 측면에서 유리한 상황

여러 객체에게 사용되어야 하지만 사용 되는 과정에 해당 객체의 상태값이 전혀 필요가 없는 경우에 사용될 때마다 만들어서 사용하기보다 계속 동일한 객체가 사용되는 것이 자원 사용 측면에서 효율적이다.

대표적으로 데이터베이스 연결시 사용되는 커넥션 풀이 이에 해당한다.



## 해결방안

하나의 객체가 여러 객체에게 공유될 수 있도록 한다. 이를 위해서 여러 객체가 이 객체를 함부로 만들 수 없도록 하며, 선언된 호출 인터페이스를 사용하면 항상 동일한 인스턴스가 반환되도록 처리한다.



## [실습코드](https://github.com/fistkim101/design-pattern-java/tree/master)





















